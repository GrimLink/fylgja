// Fylgja (getfylgja.com)
// Licensed under MIT Open Source

$aspect-ratio: "16*9" !default;
$load-aspect-ratios: () !default;
// Sample
// $load-aspect-ratios: (
//     "-r1x1": "1*1",
//     "-r4x3": "4*3",
//     "-r21x9": "21*9"
// ) !default;

.aspect-ratio {
    --aspect-ratio: #{$aspect-ratio};
    position: relative;
    display: block;
    width: 100%;
    overflow: hidden;

    &::before {
        content: "";
        display: block;
        padding-top: calc(100% / var(--aspect-ratio));
    }

    > *,
    img {
        width: 100%;
        height: 100%;
    }

    > * {
        position: absolute;
        top: 0;
        left: 0;
    }

    img {
        object-fit: cover;
    }

    @each $name, $value in $load-aspect-ratios {
        @if (length($value) > 2) {
            @error "The ratio only accepts 1 value and a (optional mq)";
        }

        &.#{$name} {
            @if (length($value) > 1) {
                $mq: nth($value, 2);
                @media ($mq) {
                    --aspect-ratio: #{nth($value, 1)};
                }
            } @else {
                --aspect-ratio: #{$value};
            }
        }
    }
}
